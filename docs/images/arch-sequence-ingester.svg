<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1785" height="819" version="1.1"><desc>User%20-%3E%20Ingester(HTTP)%3A%20Ingester%20data%0AIngester(HTTP)%20-%3E%20Metadata%3A%20Schema%20evolution%0AIngester(HTTP)%20-%3E%20Wal%3A%20Write%20to%20Wal%20file%20(data%2Fwal%2Flogs)%0AIngester(HTTP)%20-%3E%20Memtable%3A%20Write%20to%20Memtable%20(organization%2Fstream_type)%0AMemtable%20-%3E%20Immutable%3A%20Move%20(ZO_MAX_FILE_SIZE_IN_MEMORY)%0AMemtable%20-%3E%20Immutable%3A%20Move%20(ZO_MAX_FILE_SIZE_ON_DISK)%0AImmutable%20-%3E%20Local%20Disk%3A%20Dump%20parquet%20(data%2Fwal%2Ffiles)%0AImmutable%20-%3E%20Local%20Disk%3A%20interval%20(ZO_MEM_PERSIST_INTERVAL)%0AImmutable%20-%3E%20Wal%3A%20Delete%20after%20dump%0ALocal%20Disk%20-%3E%20Object%20Store%3A%20Merge%20and%20move%20to%0ALocal%20Disk%20-%3E%20Object%20Store%3A%20interval%20(ZO_FILE_PUSH_INTERVAL)%0ALocal%20Disk%20-%3E%20Object%20Store%3A%20file%20ttl%20(ZO_MAX_FILE_RETENTION_TIME)%0ALocal%20Disk%20-%3E%20Object%20Store%3A%20max%20file%20size%20(ZO_COMPACT_MAX_FILE_SIZE)%0ALocal%20Disk%20-%3E%20Querier%3A%20Send%20notification%20for%20cache%20latest%20files</desc><g><g><rect width="1785" height="819" x="0" y="0" fill="#fff" stroke="none"/></g><g><path fill="none" stroke="#000" stroke-dasharray="13.532 5.864" stroke-miterlimit="10" stroke-width="1.466" d="M 43.35894866259375 59.284222437999986 L 43.35894866259375 819.248142118" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-dasharray="13.532 5.864" stroke-miterlimit="10" stroke-width="1.466" d="M 175.84650412183854 59.284222437999986 L 175.84650412183854 819.248142118" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-dasharray="13.532 5.864" stroke-miterlimit="10" stroke-width="1.466" d="M 339.29324232034116 59.284222437999986 L 339.29324232034116 819.248142118" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-dasharray="13.532 5.864" stroke-miterlimit="10" stroke-width="1.466" d="M 463.3716376647096 59.284222437999986 L 463.3716376647096 819.248142118" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-dasharray="13.532 5.864" stroke-miterlimit="10" stroke-width="1.466" d="M 573.3528366796673 59.284222437999986 L 573.3528366796673 819.248142118" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-dasharray="13.532 5.864" stroke-miterlimit="10" stroke-width="1.466" d="M 906.7566519045372 59.284222437999986 L 906.7566519045372 819.248142118" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-dasharray="13.532 5.864" stroke-miterlimit="10" stroke-width="1.466" d="M 1226.8605098540163 59.284222437999986 L 1226.8605098540163 819.248142118" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-dasharray="13.532 5.864" stroke-miterlimit="10" stroke-width="1.466" d="M 1588.7610749568157 59.284222437999986 L 1588.7610749568157 819.248142118" paint-order="fill stroke markers"/><path fill="none" stroke="#000" stroke-dasharray="13.532 5.864" stroke-miterlimit="10" stroke-width="1.466" d="M 1733.2295765023562 59.284222437999986 L 1733.2295765023562 819.248142118" paint-order="fill stroke markers"/></g><g><path fill="none" stroke="none"/><g><path fill="#fff" stroke="#000" stroke-miterlimit="10" stroke-width="2.815" d="M 8.795878699999996 11.786477457999997 L 77.92201862518749 11.786477457999997 L 77.92201862518749 59.284222437999986 L 8.795878699999996 59.284222437999986 L 8.795878699999996 11.786477457999997 Z" paint-order="fill stroke markers"/></g><g><text x="27.883" y="41.692" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">User</text></g><path fill="none" stroke="none"/><g><path fill="#fff" stroke="#000" stroke-miterlimit="10" stroke-width="2.815" d="M 106.25480867096353 11.786477457999997 L 245.43819957271353 11.786477457999997 L 245.43819957271353 59.284222437999986 L 106.25480867096353 59.284222437999986 L 106.25480867096353 11.786477457999997 Z" paint-order="fill stroke markers"/></g><g><text x="125.342" y="41.692" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Ingester(HTTP)</text></g><path fill="none" stroke="none"/><g><path fill="#fff" stroke="#000" stroke-miterlimit="10" stroke-width="2.815" d="M 289.64427300472005 11.786477457999997 L 388.9422116359622 11.786477457999997 L 388.9422116359622 59.284222437999986 L 289.64427300472005 59.284222437999986 L 289.64427300472005 11.786477457999997 Z" paint-order="fill stroke markers"/></g><g><text x="308.731" y="41.692" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Metadata</text></g><path fill="none" stroke="none"/><g><path fill="#fff" stroke="#000" stroke-miterlimit="10" stroke-width="2.815" d="M 431.92953938180335 11.786477457999997 L 494.81373594761584 11.786477457999997 L 494.81373594761584 59.284222437999986 L 431.92953938180335 59.284222437999986 L 431.92953938180335 11.786477457999997 Z" paint-order="fill stroke markers"/></g><g><text x="451.017" y="41.692" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Wal</text></g><path fill="none" stroke="none"/><g><path fill="#fff" stroke="#000" stroke-miterlimit="10" stroke-width="2.815" d="M 522.0825371028158 11.786477457999997 L 624.6231362565189 11.786477457999997 L 624.6231362565189 59.284222437999986 L 522.0825371028158 59.284222437999986 L 522.0825371028158 11.786477457999997 Z" paint-order="fill stroke markers"/></g><g><text x="541.17" y="41.692" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Memtable</text></g><path fill="none" stroke="none"/><g><path fill="#fff" stroke="#000" stroke-miterlimit="10" stroke-width="2.815" d="M 853.4498456748536 11.786477457999997 L 960.0634581342208 11.786477457999997 L 960.0634581342208 59.284222437999986 L 853.4498456748536 59.284222437999986 L 853.4498456748536 11.786477457999997 Z" paint-order="fill stroke markers"/></g><g><text x="872.537" y="41.692" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Immutable</text></g><path fill="none" stroke="none"/><g><path fill="#fff" stroke="#000" stroke-miterlimit="10" stroke-width="2.815" d="M 1173.9617312732585 11.786477457999997 L 1279.7592884347741 11.786477457999997 L 1279.7592884347741 59.284222437999986 L 1173.9617312732585 59.284222437999986 L 1173.9617312732585 11.786477457999997 Z" paint-order="fill stroke markers"/></g><g><text x="1193.049" y="41.692" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Local Disk</text></g><path fill="none" stroke="none"/><g><path fill="#fff" stroke="#000" stroke-miterlimit="10" stroke-width="2.815" d="M 1528.9331581924641 11.786477457999997 L 1648.5889917211673 11.786477457999997 L 1648.5889917211673 59.284222437999986 L 1528.9331581924641 59.284222437999986 L 1528.9331581924641 11.786477457999997 Z" paint-order="fill stroke markers"/></g><g><text x="1548.02" y="41.692" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Object Store</text></g><path fill="none" stroke="none"/><g><path fill="#fff" stroke="#000" stroke-miterlimit="10" stroke-width="2.815" d="M 1689.7008693327311 11.786477457999997 L 1776.7582836719812 11.786477457999997 L 1776.7582836719812 59.284222437999986 L 1689.7008693327311 59.284222437999986 L 1689.7008693327311 11.786477457999997 Z" paint-order="fill stroke markers"/></g><g><text x="1708.788" y="41.692" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Querier</text></g></g><g><g><g><rect width="90.854" height="22.869" x="64.176" y="94.468" fill="#fff" stroke="none"/></g><text x="66.815" y="110.3" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Ingester data</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 43.35894866259375 117.33702185799999 L 161.3626238625052 117.33702185799999" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 161.1867062885052 110.00712294133332 L 175.84650412183854 117.33702185799999 L 161.1867062885052 124.66692077466665 Z" paint-order="stroke fill markers" transform="translate(175.84650412183854,117.33702185799999) translate(-175.84650412183854,-117.33702185799999)"/></g></g><g><g><rect width="121.813" height="22.869" x="196.663" y="143.725" fill="#fff" stroke="none"/></g><text x="199.302" y="159.557" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Schema evolution</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 175.84650412183854 166.593942578 L 324.80936206100785 166.593942578" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 324.6334444870078 159.26404366133332 L 339.29324232034116 166.593942578 L 324.6334444870078 173.92384149466668 Z" paint-order="stroke fill markers" transform="translate(339.29324232034116,166.593942578) translate(-339.29324232034116,-166.593942578)"/></g></g><g><g><rect width="206.523" height="22.869" x="216.348" y="192.982" fill="#fff" stroke="none"/></g><text x="218.986" y="208.814" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Write to Wal file (data/wal/logs)</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 175.84650412183854 215.85086329799998 L 448.8877574053763 215.85086329799998" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 448.71183983137627 208.5209643813333 L 463.3716376647096 215.85086329799998 L 448.71183983137627 223.18076221466666 Z" paint-order="stroke fill markers" transform="translate(463.3716376647096,215.85086329799998) translate(-463.3716376647096,-215.85086329799998)"/></g></g><g><g><rect width="302.407" height="22.869" x="223.396" y="242.238" fill="#fff" stroke="none"/></g><text x="226.035" y="258.071" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Write to Memtable (organization/stream_type)</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 175.84650412183854 265.10778401799996 L 558.868956420334 265.10778401799996" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 558.693038846334 257.7778851013333 L 573.3528366796673 265.10778401799996 L 558.693038846334 272.4376829346666 Z" paint-order="stroke fill markers" transform="translate(573.3528366796673,265.10778401799996) translate(-573.3528366796673,-265.10778401799996)"/></g></g><g><g><rect width="291.77" height="22.869" x="594.17" y="291.495" fill="#fff" stroke="none"/></g><text x="596.809" y="307.328" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Move (ZO_MAX_FILE_SIZE_IN_MEMORY)</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 573.3528366796673 314.36470473799994 L 892.2727716452039 314.36470473799994" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 892.0968540712039 307.0348058213333 L 906.7566519045372 314.36470473799994 L 892.0968540712039 321.6946036546666 Z" paint-order="stroke fill markers" transform="translate(906.7566519045372,314.36470473799994) translate(-906.7566519045372,-314.36470473799994)"/></g></g><g><g><rect width="267.604" height="22.869" x="606.253" y="340.752" fill="#fff" stroke="none"/></g><text x="608.892" y="356.585" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Move (ZO_MAX_FILE_SIZE_ON_DISK)</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 573.3528366796673 363.6216254579999 L 892.2727716452039 363.6216254579999" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 892.0968540712039 356.2917265413333 L 906.7566519045372 363.6216254579999 L 892.0968540712039 370.9515243746666 Z" paint-order="stroke fill markers" transform="translate(906.7566519045372,363.6216254579999) translate(-906.7566519045372,-363.6216254579999)"/></g></g><g><g><rect width="196.759" height="22.869" x="968.429" y="390.009" fill="#fff" stroke="none"/></g><text x="971.068" y="405.842" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Dump parquet (data/wal/files)</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 906.7566519045372 412.8785461779999 L 1212.376629594683 412.8785461779999" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 1212.2007120206829 405.54864726133326 L 1226.8605098540163 412.8785461779999 L 1212.2007120206829 420.20844509466656 Z" paint-order="stroke fill markers" transform="translate(1226.8605098540163,412.8785461779999) translate(-1226.8605098540163,-412.8785461779999)"/></g></g><g><g><rect width="278.47" height="22.869" x="927.574" y="439.266" fill="#fff" stroke="none"/></g><text x="930.212" y="455.099" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">interval (ZO_MEM_PERSIST_INTERVAL)</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 906.7566519045372 462.1354668979999 L 1212.376629594683 462.1354668979999" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 1212.2007120206829 454.80556798133324 L 1226.8605098540163 462.1354668979999 L 1212.2007120206829 469.46536581466654 Z" paint-order="stroke fill markers" transform="translate(1226.8605098540163,462.1354668979999) translate(-1226.8605098540163,-462.1354668979999)"/></g></g><g><g><rect width="121.806" height="22.869" x="624.161" y="488.523" fill="#fff" stroke="none"/></g><text x="626.8" y="504.356" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Delete after dump</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 906.7566519045372 511.3923876179999 L 477.85551792404294 511.3923876179999" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 478.031435498043 504.0624887013332 L 463.3716376647096 511.3923876179999 L 478.031435498043 518.7222865346665 Z" paint-order="stroke fill markers" transform="translate(463.3716376647096,511.3923876179999) translate(-463.3716376647096,-511.3923876179999)"/></g></g><g><g><rect width="131.584" height="22.869" x="1342.019" y="537.78" fill="#fff" stroke="none"/></g><text x="1344.658" y="553.613" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Merge and move to</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 1226.8605098540163 560.6493083379999 L 1574.2771946974824 560.6493083379999" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 1574.1012771234823 553.3194094213331 L 1588.7610749568157 560.6493083379999 L 1574.1012771234823 567.9792072546666 Z" paint-order="stroke fill markers" transform="translate(1588.7610749568157,560.6493083379999) translate(-1588.7610749568157,-560.6493083379999)"/></g></g><g><g><rect width="253.23" height="22.869" x="1281.196" y="587.037" fill="#fff" stroke="none"/></g><text x="1283.834" y="602.87" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">interval (ZO_FILE_PUSH_INTERVAL)</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 1226.8605098540163 609.9062290579999 L 1574.2771946974824 609.9062290579999" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 1574.1012771234823 602.5763301413332 L 1588.7610749568157 609.9062290579999 L 1574.1012771234823 617.2361279746666 Z" paint-order="stroke fill markers" transform="translate(1588.7610749568157,609.9062290579999) translate(-1588.7610749568157,-609.9062290579999)"/></g></g><g><g><rect width="288.749" height="22.869" x="1263.436" y="636.294" fill="#fff" stroke="none"/></g><text x="1266.075" y="652.126" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">file ttl (ZO_MAX_FILE_RETENTION_TIME)</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 1226.8605098540163 659.1631497779999 L 1574.2771946974824 659.1631497779999" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 1574.1012771234823 651.8332508613332 L 1588.7610749568157 659.1631497779999 L 1574.1012771234823 666.4930486946666 Z" paint-order="stroke fill markers" transform="translate(1588.7610749568157,659.1631497779999) translate(-1588.7610749568157,-659.1631497779999)"/></g></g><g><g><rect width="320.267" height="22.869" x="1247.677" y="685.551" fill="#fff" stroke="none"/></g><text x="1250.316" y="701.383" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">max file size (ZO_COMPACT_MAX_FILE_SIZE)</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 1226.8605098540163 708.420070498 L 1574.2771946974824 708.420070498" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 1574.1012771234823 701.0901715813333 L 1588.7610749568157 708.420070498 L 1574.1012771234823 715.7499694146667 Z" paint-order="stroke fill markers" transform="translate(1588.7610749568157,708.420070498) translate(-1588.7610749568157,-708.420070498)"/></g></g><g><g><rect width="247.303" height="22.869" x="1356.393" y="734.808" fill="#fff" stroke="none"/></g><text x="1359.032" y="750.64" fill="#000" stroke="none" dominant-baseline="alphabetic" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-anchor="start" text-decoration="normal" xml:space="preserve">Send notification for cache latest files</text></g><g><path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.466" d="M 1226.8605098540163 757.676991218 L 1718.7456962430228 757.676991218" paint-order="fill stroke markers"/><g><path fill="#000" stroke="none" d="M 1718.5697786690228 750.3470923013333 L 1733.2295765023562 757.676991218 L 1718.5697786690228 765.0068901346667 Z" paint-order="stroke fill markers" transform="translate(1733.2295765023562,757.676991218) translate(-1733.2295765023562,-757.676991218)"/></g></g></g></g></svg>